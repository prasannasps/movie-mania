"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[752],{4752:(O,g,m)=>{m.r(g),m.d(g,{MovieAddModule:()=>S});var p=m(8583);function v(r,n,t,o,i,a,s){try{var u=r[a](s),f=u.value}catch(L){return void t(L)}u.done?n(f):Promise.resolve(f).then(o,i)}function _(r){return function(){var n=this,t=arguments;return new Promise(function(o,i){var a=r.apply(n,t);function s(f){v(a,o,i,s,u,"next",f)}function u(f){v(a,o,i,s,u,"throw",f)}s(void 0)})}}var l=m(3679);class x{}var e=m(7716),T=m(900),h=m(4655),M=m(2976),Z=m(7423),d=m(7322),A=m(8444),c=m(4107),I=m(1022);function C(r,n){if(1&r&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function y(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Invalid Form\n"),e.qZA())}function q(r,n){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw();let o;e.xp6(1),e.hij("Movie Name: ",t.form&&(null==(o=t.form.get("name"))?null:o.value),"")}}function U(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Name is required "),e.qZA())}function N(r,n){if(1&r&&(e.TgZ(0,"mat-form-field",11),e._UZ(1,"input",20),e.YNc(2,U,2,0,"mat-error",2),e.qZA()),2&r){const t=e.oxw(2);let o;e.xp6(2),e.Q6J("ngIf",null==(o=t.form.get("name"))?null:o.invalid)}}function b(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Director is required "),e.qZA())}function J(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Popularity is required "),e.qZA())}function D(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," IMDB Score is required "),e.qZA())}function Y(r,n){if(1&r&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);let o;e.xp6(1),e.AsE(" (+",(null==(o=t.form.get("genre"))?null:o.value.length)-1," ",2===(null==(o=t.form.get("genre"))||null==o.value?null:o.value.length)?"other":"others",") ")}}function Q(r,n){if(1&r&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function F(r,n){if(1&r&&(e.TgZ(0,"form",8),e.TgZ(1,"div",9),e.YNc(2,N,3,1,"mat-form-field",10),e.TgZ(3,"mat-form-field",11),e._UZ(4,"input",12),e.YNc(5,b,2,0,"mat-error",2),e.qZA(),e.TgZ(6,"mat-form-field",11),e._UZ(7,"input",13),e.YNc(8,J,2,0,"mat-error",2),e.qZA(),e.TgZ(9,"mat-form-field",11),e._UZ(10,"input",14),e.YNc(11,D,2,0,"mat-error",2),e.qZA(),e.qZA(),e.TgZ(12,"div",15),e.TgZ(13,"mat-form-field",16),e.TgZ(14,"mat-label"),e._uU(15,"Genres"),e.qZA(),e.TgZ(16,"mat-select",17),e.TgZ(17,"mat-select-trigger"),e._uU(18),e.YNc(19,Y,2,2,"span",18),e.qZA(),e.YNc(20,Q,2,2,"mat-option",19),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r){const t=e.oxw();let o,i,a,s,u;e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",0==t.movieId),e.xp6(3),e.Q6J("ngIf",null==(o=t.form.get("director"))?null:o.invalid),e.xp6(3),e.Q6J("ngIf",null==(i=t.form.get("_99popularity"))?null:i.invalid),e.xp6(3),e.Q6J("ngIf",null==(a=t.form.get("imdb_score"))?null:a.invalid),e.xp6(7),e.hij(" ",null!=(s=t.form.get("genre"))&&s.value?null==(s=t.form.get("genre"))?null:s.value[0]:""," "),e.xp6(1),e.Q6J("ngIf",(null==(u=t.form.get("genre"))||null==u.value?null:u.value.length)>1),e.xp6(1),e.Q6J("ngForOf",t.genreList)}}let G=(()=>{class r{constructor(t,o,i,a){this.fb=t,this.appService=o,this.route=i,this.appConstants=a,this.genreList=[],this.movie=new x}ngOnInit(){var t=this;return _(function*(){t.appService.getGenres().subscribe(o=>{o&&o.List&&o.List.length>0&&(t.genreList=o.List);const i=t.route.snapshot.params.id;i?t.getMovie(i):t.setFormGroup()})})()}getMovie(t){var o=this;return _(function*(){o.movieId=t,o.appService.getMovie(t).subscribe(i=>{i&&i.Data&&(o.movie=i.Data),o.setFormGroup()})})()}submit(){if(this.form.invalid)return void(this.error=!0);this.error=!1;const t=this.form.value;this.movieId<=0?(t.created_by=this.appConstants.loggedInUser.id,this.appService.insertMovie(t).subscribe(o=>{o&&o.Data&&(this.movie=o.Data,this.movieId=this.movie.id,this.setFormGroup()),this.message="Movie Updated Successfully"})):(t.modified_by=this.appConstants.loggedInUser.id,t.id=this.movieId,this.appService.updatetMovie(t).subscribe(o=>{o&&o.Data&&(this.movie=o.Data,this.movieId=this.movie.id,this.setFormGroup()),this.message="Movie Updated Successfully"}))}setFormGroup(){this.form=this.fb.group({director:[this.movie.director,l.kI.required],genre:[this.movie.genre,l.kI.required],_99popularity:[this.movie._99popularity,l.kI.required],imdb_score:[this.movie.imdb_score,l.kI.required],name:[this.movie.name,l.kI.required]}),this.form.patchValue({genre:this.movie.genre})}reset(){this.movieId=0,this.message="",this.form.reset()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.qu),e.Y36(T.z),e.Y36(h.gz),e.Y36(M.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-movie-add"]],decls:11,vars:4,consts:[["style","color: green;","class","box row",4,"ngIf"],[1,"app-title"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"flx-end-end","flx-gap-20"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[1,"box","row",2,"color","green"],[3,"formGroup"],[1,"flx-row-stretch","flx-gap-35"],["style","flex: 1",4,"ngIf"],[2,"flex","1"],["formControlName","director","ngDefaultControl","","matInput","","placeholder","Director"],["type","number","min","0","max","100","step",".01","formControlName","_99popularity","ngDefaultControl","","matInput","","placeholder","Popularity"],["type","number","min","0","max","10","step",".01","formControlName","imdb_score","ngDefaultControl","","matInput","","placeholder","IMDB Score"],[1,"flx-row-start"],["appearance","fill",2,"flex","0.25"],["formControlName","genre","multiple",""],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["formControlName","name","ngDefaultControl","","matInput","","placeholder","Name"],[1,"example-additional-selection"],[3,"value"]],template:function(t,o){1&t&&(e.YNc(0,C,2,1,"div",0),e.TgZ(1,"div",1),e._uU(2,"Add/Edit Movies"),e.qZA(),e.YNc(3,y,2,0,"mat-error",2),e.YNc(4,q,2,1,"div",2),e.YNc(5,F,21,8,"form",3),e.TgZ(6,"div",4),e.TgZ(7,"button",5),e.NdJ("click",function(){return o.submit()}),e._uU(8,"Submit"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return o.reset()}),e._uU(10,"Reset"),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngIf",o.message&&o.message.length>0),e.xp6(3),e.Q6J("ngIf",o.error),e.xp6(1),e.Q6J("ngIf",o.movieId>0),e.xp6(1),e.Q6J("ngIf",o.form))},directives:[p.O5,Z.lW,d.TO,l._Y,l.JL,l.sg,d.KE,l.Fj,A.Nt,l.JJ,l.u,l.qQ,l.Fd,l.wV,d.hX,c.gD,c.$L,p.sg,I.ey],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]}),r})(),S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.ez,l.u5,l.UX,A.c,c.LD,Z.ot,h.Bz.forChild([{path:"",pathMatch:"full",component:G}])]]}),r})()}}]);